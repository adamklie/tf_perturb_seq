# Dataset Configuration
# =====================
# This file contains dataset-specific parameters for the CRISPR pipeline.
# See docs/CRISPR_PIPELINE.md for parameter descriptions.
#
# Usage:
#   Copy this file to your dataset directory and update the values.
#   The values here override the defaults in nextflow.config.

# =============================================================================
# Dataset Identification
# =============================================================================
dataset_name: "TEMPLATE_DATASET"  # Should match folder name
igvf_accession: "IGVFDSXXXXXXXX"  # Analysis set accession

# =============================================================================
# Data Hashing (HTOs)
# =============================================================================
# Set to true if dataset uses cell hashing for multiplexing
enable_data_hashing: true

# =============================================================================
# Sequencing Technology
# =============================================================================
# Set to true for 10x Genomics 3' v3 chemistry
is_10x3v3: false

# Spacer tag sequence for guide capture
# Default for CROP-seq: "TTAGCTCTTAAAC"
spacer_tag: "TTAGCTCTTAAAC"

# Reverse complement guides during mapping
reverse_complement_guides: true

# Dual guide library
dual_guide: false

# =============================================================================
# Reference Genome
# =============================================================================
# Reference transcriptome: "human" or "mouse"
reference_transcriptome: "human"

# Use IGVF-hosted reference files
use_igvf_reference: true

# Alternative: custom GTF path (only if use_igvf_reference: false)
# reference_gtf_download_path: "https://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_46/gencode.v46.annotation.gtf.gz"

# =============================================================================
# QC Parameters
# =============================================================================
qc_min_genes_per_cell: 500
qc_min_cells_per_gene: 0.05
qc_pct_mito: 20

# Enable Scrublet doublet detection
enable_scrublet: false

# =============================================================================
# Guide Assignment
# =============================================================================
# Method: "sceptre" or "cleanser"
guide_assignment_method: "sceptre"

# Capture method: "CROP-seq" or "direct-capture"
guide_assignment_capture_method: "CROP-seq"

# Multiplicity of infection: "high" or "low"
multiplicity_of_infection: "high"

# Method-specific parameters
# SCEPTRE
guide_assignment_sceptre_probability_threshold: "default"
guide_assignment_sceptre_n_em_rep: "default"

# CLEANSER
guide_assignment_cleanser_probability_threshold: 1

# =============================================================================
# Inference
# =============================================================================
inference_method: "default"
inference_target_guide_pairing_strategy: "default"
inference_max_target_distance_bp: 1000000

# SCEPTRE inference parameters
inference_sceptre_side: "both"
inference_sceptre_grna_integration_strategy: "union"
inference_sceptre_resampling_approximation: "skew_normal"
inference_sceptre_control_group: "default"
inference_sceptre_resampling_mechanism: "default"
inference_sceptre_formula_object: "default"

# Optional: predefined pairs to test
# inference_predefined_pairs_to_test: "path/to/pairs.csv"

# =============================================================================
# Network Analysis
# =============================================================================
network_central_nodes_num: 1
# network_custom_central_nodes: "undefined"

# =============================================================================
# Resource Limits (override if needed)
# =============================================================================
# max_cpus: 128
# max_memory: "256.GB"
