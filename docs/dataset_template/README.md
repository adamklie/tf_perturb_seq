# Dataset: {DATASET_NAME}

## Overview

| Property | Value |
|----------|-------|
| **Lab** | {LAB_NAME} |
| **Cell Line** | {CELL_LINE} |
| **Differentiation** | {DIFFERENTIATION_STATE} |
| **IGVF Analysis Set** | [{ACCESSION}](https://data.igvf.org/analysis-sets/{ACCESSION}) |
| **Status** | Not started |

## Data Description

{Brief description of the dataset, experimental design, number of TFs targeted, etc.}

## Pipeline Status

- [ ] Step 1: Generate per-sample metadata
- [ ] Step 2: Upload to GCP
- [ ] Step 3: Run CRISPR pipeline
- [ ] Step 4: QC analysis

## Directory Structure

```
{DATASET_NAME}/
├── README.md                              # This file
├── 1_generate_per_sample_metadata.sh      # Step 1: Query IGVF portal
├── 2_upload_to_gcp.sh                     # Step 2: Transfer files to GCS
├── 3_run_CRISPR_pipeline.sh               # Step 3: Run Nextflow pipeline
├── patch_files.sh                         # Optional: decompress .tsv.gz files
├── rna_seqspec.yml                        # Seqspec for scRNA modality
├── guide_seqspec.yml                      # Seqspec for gRNA modality
├── hash_seqspec.yml                       # Seqspec for hash modality (if used)
├── *.config                               # Nextflow run config (auto-generated)
├── sample_metadata.csv                    # Generated by step 1
├── sample_metadata_gcp_YYYY_MM_DD.csv     # Generated by step 2
└── sample_metadata_gcp_*_patched.csv      # Optional: patched with unzipped files
```

## Running the Pipeline

See [CRISPR Pipeline Documentation](../../docs/CRISPR_PIPELINE.md) for detailed instructions.

### Quick Start

```bash
cd $PROJECT_ROOT

# 1. Generate sample metadata from IGVF portal
bash datasets/{DATASET_NAME}/1_generate_per_sample_metadata.sh

# 2. Upload files to GCP (dry run first)
DRY_RUN=true bash datasets/{DATASET_NAME}/2_upload_to_gcp.sh
bash datasets/{DATASET_NAME}/2_upload_to_gcp.sh

# 3. (Optional) Patch .tsv.gz files to unzipped versions
bash datasets/{DATASET_NAME}/patch_files.sh

# 4. Run CRISPR pipeline
RUN_IN_BACKGROUND=true bash datasets/{DATASET_NAME}/3_run_CRISPR_pipeline.sh
```

## Results

| Output | Location | Status |
|--------|----------|--------|
| Pipeline outputs | `gs://igvf-pertub-seq-pipeline-data/{DATASET_NAME}/YYYY_MM_DD/outs/` | - |
| Nextflow Tower | [tower.nf](https://tower.nf) | - |

## Notes

{Any dataset-specific notes, issues, or observations}
